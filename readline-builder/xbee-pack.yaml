schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/readline



dependency: ncurses

provision:
  - url:
      from: https://ftp.gnu.org/gnu/readline/readline-{% version %}.tar.gz
      todir: "{% srcDir %}"

build:
  - shell:
      cmds:
        - sed -i '/MV.*old/d' Makefile.in
        - sed -i '/{OLDSUFF}/c:' support/shlib-install
        - ./configure --prefix=/usr --disable-static --with-curses --docdir=/usr/share/doc/readline-{% version %}
        - make SHLIB_LIBS="-lncursesw"
        - make SHLIB_LIBS="-lncursesw" install DESTDIR={% exportDir %}
#        - install -v -m644 doc/*.{ps,pdf,html,dvi} {% exportDir %}/share/doc/readline-{% version %}
      directory: "{% srcDir %}/readline-{% version %}"
  - export: "{% exportDir %}"

